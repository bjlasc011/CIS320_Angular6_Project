!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-file-drop",["exports","@angular/core","rxjs","@angular/common"],t):t(e["ngx-file-drop"]={},e.ng.core,e.rxjs,e.ng.common)}(this,function(e,i,r,t){"use strict";var p=function s(e,t){this.relativePath=e,this.fileEntry=t},a=function l(e){this.files=e},n=function(){function e(e,t){var n=this;this.zone=e,this.renderer=t,this.headertext="",this.customstyle="drop-zone",this.disableIf=!1,this.showBrowseBtn=!1,this.browseBtnLabel="Browse files",this.onFileDrop=new i.EventEmitter,this.onFileOver=new i.EventEmitter,this.onFileLeave=new i.EventEmitter,this.stack=[],this.files=[],this.subscription=null,this.dragoverflag=!1,this.globalDisable=!1,this.numOfActiveReadEntries=0,this.globalStart=this.renderer.listen("document","dragstart",function(e){n.globalDisable=!0}),this.globalEnd=this.renderer.listen("document","dragend",function(e){n.globalDisable=!1})}return e.prototype.onDragOver=function(e){this.isDropzoneDisabled()||(this.dragoverflag||(this.dragoverflag=!0,this.onFileOver.emit(e)),this.preventAndStop(e))},e.prototype.onDragLeave=function(e){this.isDropzoneDisabled()||(this.dragoverflag&&(this.dragoverflag=!1,this.onFileLeave.emit(e)),this.preventAndStop(e))},e.prototype.dropFiles=function(e){if(!this.isDropzoneDisabled()&&(this.dragoverflag=!1,e.dataTransfer)){e.dataTransfer.dropEffect="copy";var t=void 0;t=e.dataTransfer.items?e.dataTransfer.items:e.dataTransfer.files,this.preventAndStop(e),this.checkFiles(t)}},e.prototype.onBrowseButtonClick=function(e){this.fileSelector&&this.fileSelector.nativeElement&&this.fileSelector.nativeElement.click()},e.prototype.uploadFiles=function(e){if(!this.isDropzoneDisabled()&&e.target){var t=e.target.files||[];this.checkFiles(t)}},e.prototype.checkFiles=function(o){for(var t=this,e=function(e){var t=o[e],n=null;if(s.canGetAsEntry(t)&&(n=t.webkitGetAsEntry()),n)if(n.isFile){r=new p(n.name,n);s.addToQueue(r)}else n.isDirectory&&s.traverseFileTree(n,n.name);else if(t){var i={name:t.name,isDirectory:!1,isFile:!0,file:function(e){e(t)}},r=new p(i.name,i);s.addToQueue(r)}},s=this,n=0;n<o.length;n++)e(n);var i=r.timer(200,200);this.subscription&&this.subscription.unsubscribe(),this.subscription=i.subscribe(function(e){0<t.files.length&&0===t.numOfActiveReadEntries&&(t.onFileDrop.emit(new a(t.files)),t.files=[])})},e.prototype.traverseFileTree=function(r,o){var e=this;if(r.isFile){var t=new p(o,r);this.files.push(t),this.zone.run(function(){e.popFromStack()})}else{this.pushToStack(o),o+="/";var n=r.createReader(),s=[],a=this,l=function(){a.numOfActiveReadEntries++,n.readEntries(function(e){if(e.length)s=s.concat(e),l();else{if(0===s.length){var t=new p(o,r);a.zone.run(function(){a.addToQueue(t)})}else for(var n=function(e){a.zone.run(function(){a.traverseFileTree(s[e],o+s[e].name)})},i=0;i<s.length;i++)n(i);a.zone.run(function(){a.popFromStack()})}a.numOfActiveReadEntries--})};l()}},e.prototype.canGetAsEntry=function(e){return!!e.webkitGetAsEntry},e.prototype.isDropzoneDisabled=function(){return this.globalDisable||this.disableIf},e.prototype.addToQueue=function(e){this.files.push(e)},e.prototype.pushToStack=function(e){this.stack.push(e)},e.prototype.popFromStack=function(){return this.stack.pop()},e.prototype.clearQueue=function(){this.files=[]},e.prototype.preventAndStop=function(e){e.stopPropagation(),e.preventDefault()},e.prototype.ngOnDestroy=function(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=null),this.globalStart(),this.globalEnd()},e.decorators=[{type:i.Component,args:[{selector:"file-drop",template:'<div [className]="customstyle" [class.over]="dragoverflag"\r\n    (drop)="dropFiles($event)"\r\n    (dragover)="onDragOver($event)" (dragleave)="onDragLeave($event)">\r\n    <div class="content">\r\n        <ng-content></ng-content>\r\n        {{headertext}}\r\n        <div *ngIf="showBrowseBtn">\r\n            <input type="file" #fileSelector (change)="uploadFiles($event)" multiple style="display: none;" />\r\n            <input type="button" class="btn btn-primary btn-xs" value="{{browseBtnLabel}}" (click)="onBrowseButtonClick($event)" />\r\n        </div>        \r\n    </div>\r\n</div>\r\n',styles:[".drop-zone{margin:auto;height:100px;border:2px dotted #0782d0;border-radius:30px}.content{color:#0782d0;height:100px;display:flex;justify-content:center;align-items:center}.over{background-color:rgba(147,147,147,.5)}"]}]}],e.ctorParameters=function(){return[{type:i.NgZone},{type:i.Renderer2}]},e.propDecorators={headertext:[{type:i.Input}],customstyle:[{type:i.Input}],disableIf:[{type:i.Input}],showBrowseBtn:[{type:i.Input}],browseBtnLabel:[{type:i.Input}],onFileDrop:[{type:i.Output}],onFileOver:[{type:i.Output}],onFileLeave:[{type:i.Output}],fileSelector:[{type:i.ViewChild,args:["fileSelector"]}]},e}(),o=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{declarations:[n],exports:[n],imports:[t.CommonModule],providers:[],bootstrap:[n]}]}],e}();e.FileComponent=n,e.FileDropModule=o,e.UploadFile=p,e.UploadEvent=a,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-file-drop.umd.min.js.map